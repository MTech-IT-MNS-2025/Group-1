{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///home/suraj/Desktop/1st_sem/ic3/pq-chat/models/Message.js"],"sourcesContent":["// models/Message.js\nconst mongoose = require(\"mongoose\");\n\nconst MessageSchema = new mongoose.Schema({\n  sender: { type: String, required: true },\n  receiver: { type: String, required: true },\n  // plaintext text for classic non-encrypted mode; for PQ mode we'll use ciphertext fields\n  text: { type: String, default: null },\n  // PQ fields (nullable)\n  kemCiphertext: { type: String, default: null }, // base64\n  aesIv: { type: String, default: null }, // base64\n  ciphertext: { type: String, default: null }, // base64 AES-GCM output (ciphertext+tag)\n  timestamp: { type: Date, default: Date.now }\n});\n\nmodule.exports = mongoose.models.Message || mongoose.model(\"Message\", MessageSchema);\n\n"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,MAAM;AAEN,MAAM,gBAAgB,IAAI,SAAS,MAAM,CAAC;IACxC,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,yFAAyF;IACzF,MAAM;QAAE,MAAM;QAAQ,SAAS;IAAK;IACpC,uBAAuB;IACvB,eAAe;QAAE,MAAM;QAAQ,SAAS;IAAK;IAC7C,OAAO;QAAE,MAAM;QAAQ,SAAS;IAAK;IACrC,YAAY;QAAE,MAAM;QAAQ,SAAS;IAAK;IAC1C,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAC7C;AAEA,OAAO,OAAO,GAAG,SAAS,MAAM,CAAC,OAAO,IAAI,SAAS,KAAK,CAAC,WAAW"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/suraj/Desktop/1st_sem/ic3/pq-chat/pages/api/messages.js"],"sourcesContent":["// pages/api/messages.js\nimport connectDB from \"../../utils/db\";\nimport Message from \"../../models/Message\";\n\nexport default async function handler(req, res) {\n  await connectDB();\n\n  const { user1, user2 } = req.query;\n\n  if (!user1 || !user2) {\n    return res.status(400).json({ error: \"Missing users\" });\n  }\n\n  const messages = await Message.find({\n    $or: [\n      { sender: user1, receiver: user2 },\n      { sender: user2, receiver: user1 }\n    ]\n  }).sort({ timestamp: 1 });\n\n  res.json(messages);\n}\n\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;;;;;AAExB;;;AAEe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,MAAM;IAEN,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,KAAK;IAElC,IAAI,CAAC,SAAS,CAAC,OAAO;QACpB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAgB;IACvD;IAEA,MAAM,WAAW,MAAM,qHAAO,CAAC,IAAI,CAAC;QAClC,KAAK;YACH;gBAAE,QAAQ;gBAAO,UAAU;YAAM;YACjC;gBAAE,QAAQ;gBAAO,UAAU;YAAM;SAClC;IACH,GAAG,IAAI,CAAC;QAAE,WAAW;IAAE;IAEvB,IAAI,IAAI,CAAC;AACX"}}]
}